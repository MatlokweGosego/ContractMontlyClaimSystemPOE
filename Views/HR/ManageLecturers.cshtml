@model List<ContractMontlyClaimSystemPOE.Models.User>
@{
    ViewData["Title"] = "Manage Lecturers";
}

<h1>Manage Lecturers</h1>
<hr />

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

@if (Model == null || !Model.Any())
{
    <div class="alert alert-info">
        <h4>No lecturers found</h4>
        <p>There are no lecturers registered in the system.</p>
    </div>
}
else
{
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Full Name</th>
                <th>Email</th>
                <th>Registration Date</th>
                <th>Total Claims</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var lecturer in Model)
            {
                <tr>
                    <td>@lecturer.UserID</td>
                    <td>@lecturer.FullNames</td>
                    <td>@lecturer.Email</td>
                    <td>@lecturer.Date.ToString("MMM dd, yyyy")</td>
                    <td>
                        <span class="badge bg-secondary">0</span>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary" onclick="editLecturer(@lecturer.UserID, '@lecturer.FullNames', '@lecturer.Email')">Edit</button>
                        <button class="btn btn-sm btn-outline-info" onclick="viewClaims(@lecturer.UserID)">View Claims</button>
                        <button class="btn btn-sm btn-outline-warning" onclick="resetPassword(@lecturer.UserID)">Reset Password</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<!-- Edit Lecturer Modal -->
<div class="modal fade" id="editLecturerModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Lecturer</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form asp-action="UpdateLecturer" method="post">
                <div class="modal-body">
                    <input type="hidden" id="editUserId" name="userId" />
                    <div class="mb-3">
                        <label for="editFullName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="editFullName" name="fullName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="editEmail" name="email" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function editLecturer(userId, fullName, email) {
            document.getElementById('editUserId').value = userId;
            document.getElementById('editFullName').value = fullName;
            document.getElementById('editEmail').value = email;

            var modal = new bootstrap.Modal(document.getElementById('editLecturerModal'));
            modal.show();
        }

        function viewClaims(lecturerId) {
            alert('Viewing claims for lecturer ID: ' + lecturerId);
            // Implement view claims logic
        }

        function resetPassword(lecturerId) {
            if (confirm('Reset password for this lecturer?')) {
                alert('Password reset instructions sent!');
                // Implement password reset logic
            }
        }
    </script>
}
